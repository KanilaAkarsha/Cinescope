{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/db/index.js"],"sourcesContent":["import {MongoClient} from 'mongodb';\n\nconst options = {};\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017\";\n\nconst client = new MongoClient(MONGODB_URI, options);\n\nexport const db = client.db(\"sample_mflix\"); // Access the database instance\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU,CAAC;AACjB,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C,MAAM,SAAS,IAAI,sHAAW,CAAC,aAAa;AAErC,MAAM,KAAK,OAAO,EAAE,CAAC,iBAAiB,+BAA+B"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/actions/movies.js"],"sourcesContent":["\"use server\";\nimport { db } from \"@/db\";\n\n// import { MOVIES } from \"@/lib/data\";\n\nimport { ObjectId } from \"mongodb\";\nimport { it, run } from \"node:test\";\n\n// get all movies database - action\nexport const getMovies = async () => {\n  console.log(\"response\");\n  try {\n    // Fetch movies from the API\n    const movieResponse = await fetch(`${process.env.API_BASE_URL}/v1/movies`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      cache: \"no-store\",\n    });\n\n    if (!movieResponse.ok) {\n      throw new Error(\"Failed to fetch movies\");\n    }\n\n    if (movieResponse.status === 200) {\n      return await movieResponse.json();\n    } else {\n      console.log(\"No movies found\");\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Error fetching movies:\", error);\n    return undefined;\n  }\n};\n\n// option 2 : Search movies from the database using server action\n\nexport const searchMovies = async (query) => {\n  try {\n    //search by title (i=case insensitive)\n    const movies = await db\n      .collection(\"movies_n\")\n      .find({ title: { $regex: query, $options: \"i\" } })\n      .limit(50)\n      .toArray();\n    console.log(\"movies\", movies);\n    if (movies && movies.length > 0) {\n      return {\n        success: true,\n        message: \"Movies fetched successfully\",\n        data: movies,\n      };\n    } else {\n      return {\n        success: false,\n        message: \"No movies found\",\n        data: [],\n      };\n    }\n  } catch (error) {\n    console.log(\"Error\", error);\n    return {\n      success: false,\n      message: \"Error fetching movies\",\n      data: [],\n    };\n  }\n};\n\nexport const createMovie = async (movie) => {\n  try {\n    const result = await db.collection(\"movies_n\").insertOne(movie);\n\n    if (result.acknowledged) {\n      console.log(`A movie was inserted with the _id: ${result.insertedId}`);\n\n      return {\n        success: true,\n        message: \"Movie Created Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Mongodb movie insert failed\", error);\n  }\n};\n\nexport const updateMovie = async (movieDoc, movieId) => {\n  try {\n    const result = await db.collection(\"movies_n\").updateOne(\n      { _id: ObjectId.createFromHexString(movieId) }, // Filter to find the movie by its ID\n      { $set: movieDoc },\n      { upsert: true } // Update the movie with the new data\n    );\n\n    if (result.acknowledged) {\n      console.log(`A movie was updated with the _id: ${result.upsertedId}`);\n\n      return {\n        success: true,\n        message: \"Movie Updated Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Mongodb movie update failed\", error);\n  }\n};\n\nexport const deleteMovie = async (movieId) => {\n  try {\n    const result = await db.collection(\"movies_n\").deleteOne(\n      { _id: ObjectId.createFromHexString(movieId) } // Filter to find the movie by its ID\n    );\n\n    if (result.acknowledged) {\n      console.log(`A movie was deleted with the _id: ${result.insertedId}`);\n\n      return {\n        success: true,\n        message: \"Movie Deleted Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Mongodb movie delete failed\", error);\n  }\n};\n\nexport const getMovieById = async (movieId) => {\n  // Call the database based on parameter\n  // Simulate 2 second delay\n  //   return await new Promise((resolve) =>\n  //     setTimeout(() => resolve(MOVIES.at(5)), 2000)\n  //   );\n\n  try {\n    const movie = await db.collection(\"movies_n\").findOne(\n      { _id: ObjectId.createFromHexString(movieId) } // Filter to find the movie by its ID\n    );\n\n    if (movie && Object.keys(movie).length > 0) {\n      console.log(`Mongodb get movie by id success: ${movie._id}`);\n      const refindedMovie = {\n        title: movie.title,\n        backdrop: movie.backdrop,\n        poster: movie.poster,\n        year: movie.year,\n        rating: movie.imdb.rating ?? 0,\n        genre: movie.genres,\n        director: movie.directors[0],\n        releaseDate: movie.released,\n        overview: movie.fullplot ?? movie.plot,\n        runtime: movie.runtime,\n      };\n      return {\n        success: true,\n        message: \"Movie fetched successfully\",\n        data: refindedMovie,\n      };\n    } else {\n      console.log(\"Mongodb get movie by id: Movie not found\");\n      return {\n        success: false,\n        message: \"Movie not found\",\n        data: null,\n      };\n    }\n  } catch (error) {\n    console.log(\"Mongodb get movie by id failed\", error);\n    return {\n      success: false,\n      message: \"Error fetching movie\",\n      data: null,\n    };\n  }\n};\n\nexport const createReviewForMovie = async (movieId, review) => {\n  try {\n    const result = await db.collection(\"reviews\").insertOne({\n      movieId: ObjectId.createFromHexString(movieId),\n      ...review,\n    });\n\n    if (result.acknowledged) {\n      console.log(`A review was inserted with the _id: ${result.insertedId}`);\n\n      return {\n        success: true,\n        message: \"Review Created Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Error creating review:\", error);\n    return undefined;\n  }\n};\n\nexport const getReviewsForMovie = async (movieId) => {\n  try {\n    const reviews = await db\n      .collection(\"reviews\")\n      .find({ movieId: ObjectId.createFromHexString(movieId) })\n      .toArray();\n    console.log(\"reviews\", reviews);\n    if (reviews && reviews.length > 0) {\n      return {\n        success: true,\n        message: \"Reviews fetched successfully\",\n        data: reviews,\n      };\n    } else {\n      return {\n        success: false,\n        message: \"No reviews found\",\n        data: [],\n      };\n    }\n  } catch (error) {\n    console.log(\"Error fetching reviews:\", error);\n    return {\n      success: false,\n      message: \"Error fetching reviews\",\n      data: [],\n    };\n  }\n};\n\nexport const getAllGenres = async () => {\n  const genreSet = new Set();\n  movies.forEach((movie) => {\n    movie.genre.forEach((genre) => {\n      genreSet.add(genre);\n    });\n  });\n  return Array.from(genreSet).sort();\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getReviewsForMovie as '7f1bd066557a709bd61b00f83bf0b5d93a6eab75b1'} from 'ACTIONS_MODULE0'\nexport {getAllGenres as '7f2410862eb92f6d24256cc3b3dc55eb28f2351a54'} from 'ACTIONS_MODULE0'\nexport {searchMovies as '7f991afbd1c8eea7bdf6681efcbbfce5942cbae94e'} from 'ACTIONS_MODULE0'\nexport {updateMovie as '7faa41a01fb21043c02998cfca9d15e2ef5d373782'} from 'ACTIONS_MODULE0'\nexport {deleteMovie as '7fae0dc5c0edca0924af4f54e79ed68c18babc3950'} from 'ACTIONS_MODULE0'\nexport {createMovie as '7fb32120941666429eba1b700396c112e3bcc67e5a'} from 'ACTIONS_MODULE0'\nexport {getMovies as '7fbea025d7f183caa9c611b152b6e910e2be508ddd'} from 'ACTIONS_MODULE0'\nexport {getMovieById as '7fd1362d447a842d4f91f6008d61d2490e578c0484'} from 'ACTIONS_MODULE0'\nexport {createReviewForMovie as '7fd50946ad0eae32842a3b245f907fd52ac73c618d'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}