{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/db/index.js"],"sourcesContent":["import {MongoClient} from 'mongodb';\n\nconst options = {};\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017\";\n\nconst client = new MongoClient(MONGODB_URI, options);\n\nexport const db = client.db(\"sample_mflix\"); // Access the database instance\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,UAAU,CAAC;AACjB,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C,MAAM,SAAS,IAAI,uGAAA,CAAA,cAAW,CAAC,aAAa;AAErC,MAAM,KAAK,OAAO,EAAE,CAAC,iBAAiB,+BAA+B","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/actions/movies.js"],"sourcesContent":["\"use server\";\nimport {db} from \"@/db\";\n\n// import { MOVIES } from \"@/lib/data\";\n\nimport { ObjectId } from \"mongodb\";\nimport { it, run } from \"node:test\";\n\n// get all movies database - action\nexport const getMovies = async () => {\n    console.log(\"response\")\n    try {\n        // Fetch movies from the API\n        const movieResponse = await fetch(`${process.env.API_BASE_URL}/v1/movies`,\n            {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Accept: \"application/json\",\n                },\n                cache: \"no-store\",\n            }\n        );\n        \n\n\n        if (!movieResponse.ok) {\n            throw new Error(\"Failed to fetch movies\");\n        }\n\n        if (movieResponse.status === 200) {\n            return await movieResponse.json();\n        }else{\n            console.log(\"No movies found\");\n            return undefined;\n        }\n    } catch (error) {\n        console.log(\"Error fetching movies:\", error);\n        return undefined;\n    }\n}\n\n// option 2 : Search movies from the database using server action\n\nexport const searchMovies = async (query) => {\n    \n    try{\n        //search by title (i=case insensitive)\n        const movies = await db.collection(\"movies_n\").find({title: {$regex: query, $options: \"i\" }}).limit(50).toArray();\n        console.log(\"movies\",movies)\n        if(movies && movies.length > 0){\n            return {\n                success: true,\n                message: \"Movies fetched successfully\",\n                data: movies,\n            };\n        }else{\n            return {\n                success: false,\n                message: \"No movies found\",\n                data: [],\n            };\n        }\n    }catch(error){\n        console.log(\"Error\",error)\n        return {\n                success: false,\n                message: \"Error fetching movies\",\n                data: [],\n            };\n}\n};\n\nexport const createMovie = async (movie) => {\n    try{\n        const result = await db.collection(\"movies_n\").insertOne(movie);\n\n        if(result.acknowledged){\n            console.log(`A movie was inserted with the _id: ${result.insertedId}`)\n\n            return {\n                success: true,\n                message: \"Movie Created Successfully\",\n            };\n        }else{\n            return undefined;\n        }\n    }catch(error){\n        console.log(\"Mongodb movie insert failed\",error)\n    }\n};\n\nexport const updateMovie = async (movieDoc,movieId) => {\n    try{\n        const result = await db.collection(\"movies_n\").updateOne(\n            { _id:  ObjectId.createFromHexString(movieId) }, // Filter to find the movie by its ID\n            { $set: movieDoc },\n            { upsert: true } // Update the movie with the new data\n        );\n\n        if(result.acknowledged){\n            console.log(`A movie was updated with the _id: ${result.upsertedId}`)\n\n            return {\n                success: true,\n                message: \"Movie Updated Successfully\",\n            };\n        }else{\n            return undefined;\n        }\n    }catch(error){\n        console.log(\"Mongodb movie update failed\",error)\n    }\n};\n\nexport const deleteMovie = async (movieId) => {\n    try{\n        const result = await db.collection(\"movies_n\").deleteOne(\n            { _id:  ObjectId.createFromHexString(movieId) } // Filter to find the movie by its ID\n            \n        );\n\n        if(result.acknowledged){\n            console.log(`A movie was deleted with the _id: ${result.insertedId}`)\n\n            return {\n                success: true,\n                message: \"Movie Deleted Successfully\",\n            };\n        }else{\n            return undefined;\n        }\n    }catch(error){\n        console.log(\"Mongodb movie delete failed\",error)\n    }\n};\n\nexport const getMovieById = async (movieId) => {\n  // Call the database based on parameter\n  // Simulate 2 second delay\n//   return await new Promise((resolve) =>\n//     setTimeout(() => resolve(MOVIES.at(5)), 2000)\n//   );\n\n    try{\n        const movie =  await db.collection(\"movies_n\").findOne(\n            { _id:  ObjectId.createFromHexString(movieId) } // Filter to find the movie by its ID\n        );\n\n        if(movie && Object.keys(movie).length > 0){\n            console.log(`Mongodb get movie by id success: ${movie._id}`);\n            const refindedMovie = {\n                title: movie.title,\n                backdrop: movie.backdrop,\n                poster: movie.poster,\n                year: movie.year,\n                rating: movie.imdb.rating ?? 0,\n                genre: movie.genres,\n                director: movie.directors[0],\n                releaseDate: movie.released,\n                overview: movie.fullplot ?? movie.plot,\n                runtime: movie.runtime,\n            };\n            return {\n                success: true,\n                message: \"Movie fetched successfully\",\n                data: refindedMovie,\n            };\n            \n        }else{\n            console.log(\"Mongodb get movie by id: Movie not found\");\n            return {\n                success: false,\n                message: \"Movie not found\",\n                data: null,\n            };\n        }\n    }catch(error){\n        console.log(\"Mongodb get movie by id failed\",error)\n        return {\n            success: false,\n            message: \"Error fetching movie\",\n            data: null,\n        };\n    }\n};\n\nexport const getReviewsForMovie = async (movieId) => {\n\n    return await new Promise((resolve) =>\n    setTimeout(() => resolve([\n    {\n      id: 123,\n      userAvatar: \"\",\n      userName: \"Test\",\n      comment: \"This is a test comment\",\n      rating: 4.5,\n      createdAt: \"\",\n    },\n  ]), 2000)\n  );\n  \n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 249, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/.next-internal/server/app/movies/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {deleteMovie as '7f08cce86fd416d70bd28716c566059702095be26f'} from 'ACTIONS_MODULE0'\nexport {searchMovies as '7f2198382988381d3179a900648dc9a27e46db3844'} from 'ACTIONS_MODULE0'\nexport {updateMovie as '7f7d72ac7f0851ade5d79cb28e3a50b93e7c92682e'} from 'ACTIONS_MODULE0'\nexport {createMovie as '7f91c7a2cd0049e412f36183952d80a56da8582875'} from 'ACTIONS_MODULE0'\nexport {getReviewsForMovie as '7fa4568a14b35b33e829b8f60886580c46a3fed87a'} from 'ACTIONS_MODULE0'\nexport {getMovies as '7fd94c18048b2b8ae612e28cb321070508d84d0752'} from 'ACTIONS_MODULE0'\nexport {getMovieById as '7ff1a5382140b0ce3d0f2d437c54c4a37ee0540a71'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 331, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/app/movies/%5Bid%5D/movie-details.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/movies/[id]/movie-details.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/movies/[id]/movie-details.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqS,GAClU,mEACA","debugId":null}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/app/movies/%5Bid%5D/movie-details.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/movies/[id]/movie-details.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/movies/[id]/movie-details.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAiR,GAC9S,+CACA","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 369, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/components/ui/button.jsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props} />\n  );\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OACJ;IACC,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,CAAA,GAAA,4GAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAEf","debugId":null}},
    {"offset": {"line": 430, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/app/movies/%5Bid%5D/page.jsx"],"sourcesContent":["import { getMovieById, getReviewsForMovie } from \"@/actions/movies\";\nimport MovieDetails from \"./movie-details\";\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\n\nexport default async function MovieDetailsPage({ params }) {\n  const { id } = await params;\n  // const movie = await getMovieById(id);\n  // const reviews = await getReviewsForMovie(id);\n\n\n\n  const [movie , reviews] = await Promise.all([\n    getMovieById(id),\n    getReviewsForMovie(id),\n  ]);\n\n  //   throw new Error(\"ffff\");\n\n  if (!movie) {\n    return (\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"flex flex-col items-center justify-center py-12\">\n          <h1 className=\"text-2xl font-bold\">Movie not found</h1>\n          <p className=\"text-muted-foreground\">\n            The movie you&apos;re looking for doesn&apos;t exist.\n          </p>\n          <Link href=\"/\" className=\"mt-4\">\n            <Button>Back to Home</Button>\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  // Passing server data to client component\n  return <MovieDetails movie={movie.data} reviews={reviews} id={id} />;\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,eAAe,iBAAiB,EAAE,MAAM,EAAE;IACvD,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,wCAAwC;IACxC,gDAAgD;IAIhD,MAAM,CAAC,OAAQ,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;QAC1C,CAAA,GAAA,iHAAA,CAAA,eAAY,AAAD,EAAE;QACb,CAAA,GAAA,iHAAA,CAAA,qBAAkB,AAAD,EAAE;KACpB;IAED,6BAA6B;IAE7B,IAAI,CAAC,OAAO;QACV,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;kCAGrC,8OAAC,4JAAA,CAAA,UAAI;wBAAC,MAAK;wBAAI,WAAU;kCACvB,cAAA,8OAAC,2HAAA,CAAA,SAAM;sCAAC;;;;;;;;;;;;;;;;;;;;;;IAKlB;IAEA,0CAA0C;IAC1C,qBAAO,8OAAC,4IAAA,CAAA,UAAY;QAAC,OAAO,MAAM,IAAI;QAAE,SAAS;QAAS,IAAI;;;;;;AAChE","debugId":null}}]
}