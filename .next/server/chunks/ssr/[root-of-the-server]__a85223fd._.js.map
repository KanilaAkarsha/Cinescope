{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/db/index.js"],"sourcesContent":["import {MongoClient} from 'mongodb';\n\nconst options = {};\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017\";\n\nconst client = new MongoClient(MONGODB_URI, options);\n\nexport const db = client.db(\"sample_mflix\"); // Access the database instance\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,UAAU,CAAC;AACjB,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C,MAAM,SAAS,IAAI,uGAAA,CAAA,cAAW,CAAC,aAAa;AAErC,MAAM,KAAK,OAAO,EAAE,CAAC,iBAAiB,+BAA+B","debugId":null}},
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/actions/movies.js"],"sourcesContent":["\"use server\";\nimport { db } from \"@/db\";\n\n// import { MOVIES } from \"@/lib/data\";\n\nimport { ObjectId } from \"mongodb\";\nimport { it, run } from \"node:test\";\n\n// get all movies database - action\nexport const getMovies = async () => {\n  console.log(\"response\");\n  try {\n    // Fetch movies from the API\n    const movieResponse = await fetch(`${process.env.API_BASE_URL}/v1/movies`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n      },\n      cache: \"no-store\",\n    });\n\n    if (!movieResponse.ok) {\n      throw new Error(\"Failed to fetch movies\");\n    }\n\n    if (movieResponse.status === 200) {\n      return await movieResponse.json();\n    } else {\n      console.log(\"No movies found\");\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Error fetching movies:\", error);\n    return undefined;\n  }\n};\n\n// option 2 : Search movies from the database using server action\n\nexport const searchMovies = async (query) => {\n  try {\n    //search by title (i=case insensitive)\n    const movies = await db\n      .collection(\"movies_n\")\n      .find({ title: { $regex: query, $options: \"i\" } })\n      .limit(50)\n      .toArray();\n    console.log(\"movies\", movies);\n    if (movies && movies.length > 0) {\n      return {\n        success: true,\n        message: \"Movies fetched successfully\",\n        data: movies,\n      };\n    } else {\n      return {\n        success: false,\n        message: \"No movies found\",\n        data: [],\n      };\n    }\n  } catch (error) {\n    console.log(\"Error\", error);\n    return {\n      success: false,\n      message: \"Error fetching movies\",\n      data: [],\n    };\n  }\n};\n\nexport const createMovie = async (movie) => {\n  try {\n    const result = await db.collection(\"movies_n\").insertOne(movie);\n\n    if (result.acknowledged) {\n      console.log(`A movie was inserted with the _id: ${result.insertedId}`);\n\n      return {\n        success: true,\n        message: \"Movie Created Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Mongodb movie insert failed\", error);\n  }\n};\n\nexport const updateMovie = async (movieDoc, movieId) => {\n  try {\n    const result = await db.collection(\"movies_n\").updateOne(\n      { _id: ObjectId.createFromHexString(movieId) }, // Filter to find the movie by its ID\n      { $set: movieDoc },\n      { upsert: true } // Update the movie with the new data\n    );\n\n    if (result.acknowledged) {\n      console.log(`A movie was updated with the _id: ${result.upsertedId}`);\n\n      return {\n        success: true,\n        message: \"Movie Updated Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Mongodb movie update failed\", error);\n  }\n};\n\nexport const deleteMovie = async (movieId) => {\n  try {\n    const result = await db.collection(\"movies_n\").deleteOne(\n      { _id: ObjectId.createFromHexString(movieId) } // Filter to find the movie by its ID\n    );\n\n    if (result.acknowledged) {\n      console.log(`A movie was deleted with the _id: ${result.insertedId}`);\n\n      return {\n        success: true,\n        message: \"Movie Deleted Successfully\",\n      };\n    } else {\n      return undefined;\n    }\n  } catch (error) {\n    console.log(\"Mongodb movie delete failed\", error);\n  }\n};\n\nexport const getMovieById = async (movieId) => {\n  // Call the database based on parameter\n  // Simulate 2 second delay\n  //   return await new Promise((resolve) =>\n  //     setTimeout(() => resolve(MOVIES.at(5)), 2000)\n  //   );\n\n  try {\n    const movie = await db.collection(\"movies_n\").findOne(\n      { _id: ObjectId.createFromHexString(movieId) } // Filter to find the movie by its ID\n    );\n\n    if (movie && Object.keys(movie).length > 0) {\n      console.log(`Mongodb get movie by id success: ${movie._id}`);\n      const refindedMovie = {\n        title: movie.title,\n        backdrop: movie.backdrop,\n        poster: movie.poster,\n        year: movie.year,\n        rating: movie.imdb.rating ?? 0,\n        genre: movie.genres,\n        director: movie.directors[0],\n        releaseDate: movie.released,\n        overview: movie.fullplot ?? movie.plot,\n        runtime: movie.runtime,\n      };\n      return {\n        success: true,\n        message: \"Movie fetched successfully\",\n        data: refindedMovie,\n      };\n    } else {\n      console.log(\"Mongodb get movie by id: Movie not found\");\n      return {\n        success: false,\n        message: \"Movie not found\",\n        data: null,\n      };\n    }\n  } catch (error) {\n    console.log(\"Mongodb get movie by id failed\", error);\n    return {\n      success: false,\n      message: \"Error fetching movie\",\n      data: null,\n    };\n  }\n};\n\nexport const getReviewsForMovie = async (movieId) => {\n  return await new Promise((resolve) =>\n    setTimeout(\n      () =>\n        resolve([\n          {\n            id: 123,\n            userAvatar: \"\",\n            userName: \"Test\",\n            comment: \"This is a test comment\",\n            rating: 4.5,\n            createdAt: \"\",\n          },\n        ]),\n      2000\n    )\n  );\n};\n\nexport const users = async (query) => {\n  try {\n    const users = await db\n      .collection(\"users\")\n      .find({ name: { $regex: query, $options: \"i\" } })\n      .limit(50)\n      .toArray();\n    console.log(\"users\", users);\n    if (users && users.length > 0) {\n      return {\n        success: true,\n        message: \"Users fetched successfully\",\n        data: users,\n      };\n    } else {\n      return {\n        success: false,\n        message: \"No users found\",\n        data: [],\n      };\n    }\n  } catch (error) {\n    console.log(\"Error fetching users:\", error);\n    return {\n      success: false,\n      message: \"Error fetching users\",\n      data: [],\n    };\n  }\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/.next-internal/server/app/admin/users/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {users as '7f9c472aadc9154289100206068a143769d7e7287e'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/app/admin/users/page.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/admin/users/page.jsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/admin/users/page.jsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","debugId":null}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///Users/kanilaakarsha/Documents/GitHub/Cinescope/app/admin/users/page.jsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/admin/users/page.jsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/admin/users/page.jsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwQ,GACrS,sCACA","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}}]
}